<link rel="import" href="/sys/polymer/polymer.html">
<link rel="import" href="/sys/palindrom-redirect/palindrom-redirect.html">
<link rel="stylesheet" href="/screens/css/mainapp.css">
<template>
    <dom-bind>
        <template is="dom-bind">
            <div class="mainAppPage">
                <div>
                    <!-- Error MessageBox -->
                    <imported-template model="{{model.ErrorMessage}}" href="{{model.ErrorMessage.Html}}"></imported-template>
                    <!--<template is="imported-template" model="{{model.ErrorMessage}}" href="{{model.ErrorMessage.Html}}"></template>-->
                    <!-- MessageBox -->
                    <imported-template model="{{model.MessageBox}}" href="{{model.MessageBox.Html}}"></imported-template>

                </div>
                <template is="dom-if" if="{{!model.HideMenu}}">
                    <div class="appMenu">
                        <ul>
                            <starcounter-include style="height:100%" partial="{{model.Menu}}"></starcounter-include>
                        </ul>
                    </div>
                </template>

                <div class="appContent">
                    <imported-template model="{{model.Content}}" href="{{model.Content.Html}}"></imported-template>
                </div>
            </div>

            <button type="submit" value="{{model.MessageBoxTrigger$::click}}" class="btn btn-sm btn-primary" onclick="++this.value">MessageBox</button>
            <button type="submit" value="{{model.ErrorMessageBoxTrigger$::click}}" class="btn btn-sm btn-primary" onclick="++this.value">ErrorMessageBox</button>

			<palindrom-redirect history url="[[model.RedirectUrl]]"></palindrom-redirect>
<!--            <link is="palindrom-redirect" history url$="{{model.RedirectUrl}}"> -->
        </template>
    </dom-bind>
    <script>

        var head = document.getElementsByTagName('head')[0];
        var manifestLink = document.createElement('link');
        manifestLink.rel = "manifest";
        manifestLink.href = "/screens/manifest.json";
        head.appendChild(manifestLink);

                //var iosFullScreen = document.createElement('meta');
                //iosFullScreen.name = "apple-mobile-web-app-capable";
                //iosFullScreen.content = "yes";
                //head.appendChild(iosFullScreen);

                //var iosIcon = document.createElement('link');
                //iosIcon.rel = "apple-touch-icon";
                //iosIcon.href = "/screens/screens.png";
                //head.appendChild(iosIcon);

                //var iosStatusBar = document.createElement('meta');
                //iosStatusBar.name = "apple-mobile-web-app-status-bar-style";
                //iosStatusBar.content = "black-translucent";
                //head.appendChild(iosStatusBar);

                //<meta name="apple-mobile-web-app-capable" content="yes">
                //<link rel="apple-touch-icon" href="screens.png">
                //<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    </script>
</template>